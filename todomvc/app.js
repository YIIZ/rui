!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";let o;n.r(t);class s extends Set{constructor(e,t=!1){super(),this.taker=e,this.value=void 0,this.needUpdate=!1,this.dependencies=!!t&&new Set;const n=this.eval.bind(this);n.__compute=!0,this.boundEval=n}update(){const{dependencies:e}=this;e&&(this.dependencies=new Set);const t=o;o=this;const n=this.taker();if(o=t,e){const t=this.dependencies;e.forEach(e=>{t.has(e)||e.delete(this)})}this.value!==n&&(this.value=n,this.forEach(e=>e.needUpdate=e!==o),this.forEach(e=>e.checkUpdate()))}checkUpdate(){this.potentialUpdate&&(this.needUpdate?(this.needUpdate=!1,this.potentialUpdate=!1,this.update()):this.dependencies&&(this.dependencies.forEach(e=>e.checkUpdate()),this.potentialUpdate=!1))}eval(){return o&&o.dependencies&&(o.dependencies.add(this),this.has(o)||this.add(o)),this.size>0?(this.checkUpdate(),this.value):this.taker()}add(e){super.add(e),1===this.size&&(this.onStart&&this.onStart(),this.update())}delete(e){super.delete(e),0===this.size&&(this.dependencies&&this.dependencies.forEach(e=>e.delete(this)),this.onStop&&this.onStop())}}const c=(e,t)=>{t(e)&&e.forEach(e=>c(e,t))};let i=[];const l=e=>{const t=(e=>{e.needUpdate=!0;const t=[];return c(e,e=>!e.potentialUpdate&&(e.potentialUpdate=!0,t.push(e),!0)),()=>t.forEach(e=>e.potentialUpdate=!1)})(e);if(i){if(i.push([e,t]),1===i.length)return queueMicrotask(()=>{const e=i;i=null;try{e.forEach(([e])=>e.checkUpdate())}finally{e.forEach(([,e])=>e()),i=[]}})}else try{e.checkUpdate()}finally{t()}},a=e=>{return new s(e,!0).boundEval},r=e=>{let t=e;const n=new s(()=>t);return[n.boundEval,e=>(t=e,l(n))]},d=e=>"function"==typeof e&&!0===e.__compute,h=(e,...t)=>{const n=o;o=null;const s=e(...t);return o=n,s};class u{constructor(e,t,n){if(this.attached=!1,this.el=e,this.hooks=[],this.children=[],t)for(const[e,n]of Object.entries(t))d(n)?g(()=>this.applyProp(e,n())):this.applyProp(e,n);if(n)for(const e of n)if(d(e)){const t=[this.createAnchor()];this.append(t[0]);let n=t;g(()=>{const o=e(),s=Array.isArray(o)?o.length>0?o:t:null!=o?[o]:t;n=this.replace(n,s)})}else this.append(e)}createAnchor(){return new u}applyProp(e,t){this.el[e]=t}append(e){this.children.push(e),this.attached&&e.attach(this.root,this)}replace(e,t){const{children:n}=this;return n.splice(n.indexOf(e[0]),e.length,...t),this.attached&&(e.forEach(e=>e.detach()),t.forEach(e=>e.attach(this.root,this))),t}attach(e=this,t){this.root=e,this.attached=!0,this.children.forEach(e=>e.attach(this.root,this)),this.clearhooks=this.hooks.map(e=>e(this)).filter(e=>"function"==typeof e)}detach(){this.attached=!1,this.children.forEach(e=>e.detach()),this.clearhooks.forEach(e=>e())}}let p;function f(e,t,...n){const o=p;p=[];const s=h(e,t||{},n);return p.length&&s.hooks.push(...p),p=o,s}function m(e){p.push(e)}const g=e=>{m(()=>(e=>{const t=new s(e,!0);return t.update(),()=>t.delete()})(e))};function v(e,t){const n="function"==typeof e?a(()=>!!e()):()=>e;return a(()=>n()?f(t):null)}function y(e=""){return new u(document.createTextNode(e),{data:e})}const b=e=>e instanceof u?e:y(e);class E extends u{constructor(e,t,n){super("string"==typeof e?document.createElement(e):e,t,n)}createAnchor(){return y()}applyProp(e,t){const{el:n}=this;e in n?n[e]=t:n.setAttribute(e,t)}append(e){const t=b(e);this.el.append(t.el),super.append(t)}replace(e,t){const n=t.map(b),o=this.el,s=e[e.length-1].el.nextSibling;return e.forEach(({el:e})=>o.removeChild(e)),n.forEach(({el:e})=>o.insertBefore(e,s)),super.replace(e,n)}}function k({tag:e,...t},n){return new E(e,t,n)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function S(e,t,...n){return"string"==typeof e?f(k,w({tag:e},t),...n):f(e,t,...n)}const N=e=>d(e)?e():e;function U(e){const t=Object.keys(e),n=Object.values(e);return a(()=>t.filter((e,t)=>!!N(n[t])).join(" "))}function C({todo:e,editing:t,onEdit:n,onSave:o,onToggle:s,onDestroy:c,onCancel:i}){const[l,a]=r(""),d=()=>{if(!t())return;const e=l().trim();e?o(e):c()};let h;return S("li",{className:U({completed:e.completed,editing:t})},S("div",{className:"view"},S("input",{className:"toggle",type:"checkbox",checked:e.completed,onchange:s}),S("label",{ondblclick:()=>{n();const t=e.title(),{el:o}=h;a(t),o.focus(),o.setSelectionRange(t.length,t.length)}},e.title),S("button",{className:"destroy",onclick:c})),h=S("input",{className:"edit",value:l,onblur:d,oninput:({target:e})=>{a(e.value)},onkeydown:({code:e})=>{"Enter"===e?d():"Escape"===e&&i()}}))}function x({count:e,completedCount:t,nowShowing:n,onClearCompleted:o}){const s=a(()=>e()>1?"items":"item");return S("footer",{className:"footer"},S("span",{className:"todo-count"},S("strong",null,e)," ",s," left"),S("ul",{className:"filters"},S("li",null,S("a",{href:"#/",className:U({selected:a(()=>""===n())})},"All"))," ",S("li",null,S("a",{href:"#/active",className:U({selected:a(()=>"active"===n())})},"Active"))," ",S("li",null,S("a",{href:"#/completed",className:U({selected:a(()=>"completed"===n())})},"Completed"))),v(t,()=>S("button",{className:"clear-completed",onclick:o},"Clear completed")))}const O=((e,t)=>{const n=new s(e);let o;return n.onStart=()=>{o=t(()=>l(n))},n.onStop=()=>{o&&o()},n.boundEval})(()=>location.hash.slice(1),e=>(window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)));class j{constructor(e){this.id=Date.now();const[t,n]=r(e),[o,s]=r(!1);this.title=t,this.completed=o,this.setTitle=n,this.setCompleted=s}}const P=S((function(){const[e,t]=r([new j("hello")]),[n,o]=r(""),[s,c]=r(),i=a(()=>O().slice(1)),l=a(()=>"active"===i()?e().filter(e=>!e.completed()):"completed"===i()?e().filter(e=>e.completed()):e()),d=a(()=>e().reduce((e,t)=>t.completed()?e:e+1,0)),h=a(()=>e().length-d()),u=()=>c(null),p=({target:t})=>{const n=t.checked;e().forEach(e=>e.setCompleted(n))},m=()=>{t(e().filter(e=>!e.completed()))};return S("div",null,S("header",{className:"header"},S("h1",null,"todos"),S("input",{className:"new-todo",placeholder:"What needs to be done?",autofocus:!0,value:n,onkeydown:s=>{if("Enter"!==s.code)return;s.preventDefault();const c=n();o(""),t(e().concat(new j(c)))},oninput:({target:e})=>o(e.value)})),v(()=>e().length>0,()=>(console.log("render main"),S("section",{className:"main"},S("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onchange:p,checked:a(()=>0===d())}),S("label",{htmlFor:"toggle-all"}),S("ul",{className:"todo-list"},function(e,t){const n="function"==typeof e?e:()=>e;return a(()=>n().map((e,n)=>f(t,{item:e,index:n})))}(l,({item:n,index:o})=>S(C,{key:n.id,todo:n,onToggle:()=>(e=>{console.log(`toggle ${e.id}`),e.setCompleted(!e.completed())})(n),onDestroy:()=>(n=>{t(e().filter(e=>e.id!==n))})(n.id),onEdit:()=>c(n.id),editing:a(()=>s()===n.id),onSave:e=>((e,t)=>{console.log(`save ${e.id}: ${t}`),console.log(e),e.setTitle(t),c(null)})(n,e),onCancel:u})))))),v(()=>d()||h(),()=>(console.log("render footer"),S(x,{count:d,completedCount:h,nowShowing:i,onClearCompleted:m}))))}),null);document.querySelector(".todoapp").appendChild(P.el),P.attach()}]);